# Organizing for DevOps
## DevOpsにおける組織構造の重要性

### DevOps成功のための組織的基盤：アジャイルチーム

DevOpsを成功させるには、まず**アジャイルな組織文化**を築くことが不可欠です。アジャイルチームは以下の特性を持つ必要があります。

* **小規模**: チームメンバーは10名以内（理想は5〜7名）。大規模なチームは分割する必要があります。
* **専属**: メンバーは複数のプロジェクトを兼任せず、一つのプロジェクトに集中します。
* **クロスファンクショナル**: チームは開発に必要なあらゆるスキル（ソフトウェアエンジニア、テストエンジニア、運用エンジニア、ビジネスアナリストなど）を持つメンバーで構成されます。
* **自己組織化**: チームは自律的にタスクを決定し、スプリントごとに作業にコミットします。

### コンウェイの法則（Conway's Law）

1968年にメルヴィン・コンウェイが提唱した法則で、以下のことを示しています。

> 「システムを設計する組織は、その組織のコミュニケーション構造を反映した設計を必ず生み出す。」

* **具体例**:
    * 4つのチームにコンパイラ開発を依頼すると、4つのパスを持つコンパイラができます。
    * UIチーム、アプリケーションチーム、データベースチームの3つのチームが存在する場合、3層アーキテクチャが必然的に生まれます。

この法則は、**組織構造が開発されるシステムのアーキテクチャに直接的な影響を与える**ことを意味します。マイクロサービスアーキテクチャのような新しい構造を望むなら、それに合わせて組織の構造自体も変更する必要があります。

### DevOpsにおける最適な組織構造

DevOpsの恩恵を最大限に引き出すためには、**ビジネスドメイン**ごとにチームを編成することが不可欠です。

#### 伝統的な組織構造（技術別）の問題点

* UI、アプリケーション、データベースといった**技術レイヤーごと**にチームが分かれています。
* 機能開発には複数のチーム（フロントエンド、バックエンド、DBA）との連携が必要になり、チケットシステムを介したコミュニケーションが発生します。
* これにより、開発プロセスが遅延し、非効率性が生じます。
* コンウェイの法則に従い、3層アーキテクチャのようなモノリシックなシステムが構築されやすくなります。

#### 理想的な組織構造（ビジネスドメイン別）

* ログインやユーザー管理を担当する「アカウントチーム」、パーソナライゼーションアルゴリズムを担当する「パーソナライゼーションチーム」のように、**ビジネスの機能（ドメイン）ごと**にチームを編成します。
* 各チームは、そのドメインに必要な**クロスファンクショナルなスキル**（UI、アプリケーション、データベースのスキル）をすべて持ち、**自律的**に機能開発を完結できます。
* **特徴**:
    * **エンドツーエンドの責任**: チームは、サービスのコミット、ビルド、デプロイ、保守、運用までを一貫して担当します。
    * **自律性**: 「ミニスタートアップ」のように機能し、他チームとの協調作業やチケット発行の必要がなくなります。
    * **長期的なミッション**: 特定のビジネスドメインに長期的に取り組むことで、チームの**オーナーシップ**と**誇り**が育まれます。

要するに、DevOpsを成功させるためには、**技術中心の組織からビジネスドメイン中心の組織へと転換**し、小規模で自律的なチームにエンドツーエンドの責任と権限を与えることが重要です。

## DevOpsの本質と誤解

### DevOpsとは何か？

**DevOps**は、特定の職種やチーム名ではなく、**組織全体の文化やマインドセット**を指します。開発（Dev）と運用（Ops）のエンジニアが、ソフトウェアのライフサイクル全体を通じて協力する**プラクティス（実践）**のことです。

* **目的**: リーン（Lean）やアジャイル（Agile）の原則に従い、高品質なソフトウェアを安定的かつ継続的に提供すること。
* **本質**: サイロ化したチームによって引き起こされる機能不全を解消するための文化的な変革です。

### DevOpsに関する主な誤解

多くの組織で、DevOpsという言葉は誤って解釈されています。

1.  **DevOpsチームの存在**:
    * 「DevOpsチーム」という特定のチームを設けることは、アンチパターンです。
    * これは、DevとOpsの間に新たなサイロ（隔たり）を生み出すだけであり、両者の協力関係を阻害します。
    * アジャイルな組織になるために「アジャイルチーム」を作らないのと同じように、DevOpsの実現に特定のチームは必要ありません。

2.  **DevOpsは特定の職種名**:
    * 「DevOpsエンジニア」という職種名が存在することもありますが、DevOpsは特定の人物やチームが担当するものではありません。
    * 開発者と運用者が協力して実践する文化であり、特定の誰かが専門に行う仕事ではありません。

3.  **DevOpsはOpsの延長**:
    * DevOpsの"Dev"（開発）が示す通り、DevOpsは開発と運用の両方を含みます。
    * 運用側の人間だけが行うものではありません。開発に関わっていないのであれば、それは単なる「Ops」です。

### 伝統的な組織構造の問題点

従来の組織では、開発チームと運用チームがそれぞれ異なる目標を持つことで、**「混乱の壁（Wall of Confusion）」**が生じていました。

| | **開発チーム (Dev)** | **運用チーム (Ops)** |
| :--- | :--- | :--- |
| **目標** | 新機能の迅速なリリース数 | 本番環境の安定性 |

この異なる目標が、お互いの対立を生み出していました。運用チームはシステムの安定のために変更を嫌い、開発チームは多くの新機能をリリースしようとします。DevOpsは、この対立を解消し、両者が同じ目標に向かって協力するための考え方です。

### DevOpsを実践するためのベストプラクティス

DevOpsを成功させるには、組織全体で以下の原則を実践する必要があります。

* **クロスファンクショナルチーム**: 開発者と運用者が、同じチーム内で協力し、ソフトウェアのライフサイクル全体に責任を持つようにします。
* **透明性と信頼**: チーム間で情報がオープンに共有され、相互に信頼し合う文化を醸成します。
* **共通の目標**: 開発と運用が同じ目標を共有し、評価指標も統一します。
* **文化の変革**: 組織全体が、働き方を変え、協力と継続的な改善を重視するマインドセットを定着させることが不可欠です。

## DevOpsにおける全員参加の責任

### コンウェイの法則と組織のサイロ化

DevOpsを成功させるためには、組織全体で責任を分かち合う文化を醸成することが不可欠です。**「悪い行動は、自分の行動がもたらす結果から人々を遠ざけることによって生じる」**というジェズ・ハンブルの言葉が示すように、組織のサイロ化（縦割り構造）は、各チームが他チームへの影響を感じられなくなり、**無関心（apathy）**を引き起こします。

**【具体例：QAチームの導入】**
品質に問題を抱えていた会社が、QAチームを新設したところ、かえって品質が悪化しました。これは、開発者が「品質管理はQAチームの仕事」と考えるようになり、コードのテストに対する責任感が薄れたためです。結果として、バグの混入が増え、QAチームが対応しきれなくなり、全体の品質が低下しました。

### 責任感を高めるための具体的な施策

行動には結果が伴うという原則に基づき、開発者と運用者が互いの仕事の影響を感じられるようにすることが重要です。

* **クロスファンクショナルチームの設立**:
    * 開発、運用、QAなど、必要なスキルを持つメンバーを一つのチームに集約することで、チケットシステムを介したやり取りではなく、直接的なコミュニケーションを促します。

* **異動やローテーション**:
    * クロスファンクショナルチームの設立が難しい場合、開発者を一時的に運用業務にローテーションさせ、運用エンジニアが日々直面する課題を体験させます。
    * 同様に、運用エンジニアを開発チームのミーティング（朝会やデモ）に参加させ、開発内容への理解を深めます。

* **責任の明確化**:
    * 開発者に**オンコール対応（ページャー担当）**や、サービスレベル契約（SLA）の所有権を与えます。
    * 夜中に呼び出される経験をさせることで、彼らは自然と高品質なコードを書くようになります。

### DevOpsにおける組織の目標

DevOps組織が目指すべきは、**「分散されたローカルなコントロールを持つ共有された意識」**です。

1.  **共有された意識**:
    * 組織全体の目標やビジョン（「大きな絵」）を全員が理解している状態。

2.  **分散されたローカルなコントロール**:
    * 大きな目標達成に向けた具体的な方法や手段は、各チームに決定権を持たせます。
    * これにより、メンバーは自律的に最適な方法を考え、実行することができます。

アマゾンのCTO、ワーナー・ボーゲルズの言葉**「You build it, you run it!（自分で作って、自分で運用しろ！）」**が象徴するように、DevとOpsの間に境界線はありません。全員が顧客に価値を届ける責任を負うことで、高品質なサービスが実現されます。