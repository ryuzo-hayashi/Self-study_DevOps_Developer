# Overview of DevOps
## DevOps入門：文化とテクノロジーの変革

---

### 講義の目的とDevOpsの定義
* **講義の目的**: DevOpsを成功させ、定着させるために必要な**文化的・技術的変革**を理解する。
* **DevOpsの定義**:
    * 単なるツールや職種ではなく、開発（Development）チームと運用（Operations）チームがソフトウェア開発のライフサイクル全体を通じて協力する**プラクティス（実践）**。
    * **リーン**や**アジャイル**の原則に従い、ソフトウェアを迅速かつ継続的に提供することを目指す。

---

### DevOps成功の鍵：文化と組織
* DevOpsの取り組みが失敗する最大の原因は、スキルやツールではなく、**組織的な学習と文化の変革**に関する問題である。
* Gartner社の分析でも、「テクノロジーではなく、**人に関わる要因**が最大の課題」とされている。
* DevOpsを成功させるためには、チーム間の共有されたマインドセット（**DevOpsカルチャー**）が不可欠。
* **DORA (DevOps Research and Assessment)チーム**の調査でも、「チーム文化が、ソフトウェアの提供能力と組織目標の達成に大きな影響を与える」と結論付けられている。

---

### DevOps文化を変革するための4つの柱
DevOps文化を変革するためには、以下の4つの側面で新しいアプローチを取り入れる必要がある。

1.  **「考え方」を変える (Thinking Differently)**
    * **ソーシャルコーディング**や**ソフトウェアの再利用・共有**を通じて、新しい思考法を学ぶ。
    * **リーン生産方式**の考え方を取り入れ、**小さなバッチ**で作業することで無駄を削減する。
    * 顧客からの貴重なフィードバックを得るために、**最小実行可能製品（MVP）**を作成する。
    
2.  **「働き方」を変える (Working Differently)**
    * **テスト駆動開発（TDD）**や**振る舞い駆動開発（BDD）**といった手法を採用し、再現性のある振る舞いと高いコード品質を確保する。
    * **継続的インテグレーション（CI）**と**継続的デリバリー（CD）**を実践し、すべての変更がすぐにリリース可能な状態（potentially shippable）に貢献するようにする。
    * **ツールは文化的な問題の解決策ではない**という点を理解することが重要。

3.  **「組織のあり方」を変える (Organizing Differently)**
    * 組織の構成は、生み出される製品のアーキテクチャやデザインに直接影響を与えるため、チームを異なる方法で組織化する必要がある。

4.  **「評価・測定方法」を変える (Measuring Differently)**
    * 正しい行動を促すように測定システムを変更することが成功には不可欠（**「何を測るかによって、何が得られるかが決まる」**）。
    * 見かけだけの数字である**バニティメトリクス**に惑わされず、製品や顧客に関する貴重な洞察を得るための**アクション可能なメトリクス**を活用する。

---

### DevOps文化を醸成するマインドセット
* DevOpsは、**実験**を恐れず、失敗を**学習の機会**として捉える文化を育む必要がある。
* **「Fail fast (素早く失敗する)」**という考え方が重要。
* **チームワーク、説明責任、信頼**といったコアバリューを育むことが不可欠。
* DevOpsは「やるもの（do）」ではなく、**「なるもの（become）」**である。全員が協力し、一体となって取り組むチームスポーツである。

## DevOps導入の背景：ディスラプション（創造的破壊）
---

### ディスラプションの脅威
* **ディスラプション**とは、新興企業が新しいビジネスモデルやテクノロジーによって既存市場を破壊すること。
* 2000年以降、フォーチュン500企業の52%が姿を消した。これは、ディスラプションが原因で多くの企業が適応できなかったことを示している。
* 既存企業は「いつディスラプションが起こるか」ではなく、**「必ずディスラプションが起こる」**という認識を持つ必要がある。
* 銀行の例：小切手アプリを6ヶ月かけて開発している間に、競合他社が先にリリースすると、多くの顧客を失うことになる。市場の変化に迅速に対応できない企業は生き残れない。

### イノベーションの本質：技術かビジネスモデルか？
* ディスラプションの原因は、必ずしも**「新しい技術」**だけではない。
* ディスラプター（破壊者）が利用できる技術は、既存企業も利用可能である場合が多い（例：オープンソース技術）。
* 重要なのは、既存の技術を組み合わせ、**革新的なビジネスモデル**を構築すること。
* **Uberの例**:
    * Uberが使用しているGPS、電子決済、スマートフォンといった技術は、当時すでに存在していた。
    * Uberが革新的だったのは、これらの技術を組み合わせて「スマートフォンでドライバーを呼ぶ」という新しい配車サービスモデルを創出したことである。
    * 既存のタクシー業界が対応すべきは、法規制を求めることではなく、顧客のニーズに応えるアプリを開発することだった。
* **NetflixとBlockbusterの例**:
    * Blockbusterは自分たちが「ビデオレンタル業」だと考えていたため、Netflixのようなストリーミングサービスへの移行に失敗した。
    * 一方、Netflixは自分たちが「エンターテイメント業」であると理解し、ビジネスモデルをDVD郵送からストリーミング配信へと柔軟に変化させた。
* **Garminの例**:
    * Garminは、GPSがスマートフォンの標準機能になったとき、「マッピング事業」ではなく「トラッキング事業」だと再定義した。
    * その結果、車のナビゲーションシステムからフィットネス用のウェアラブルデバイスへとビジネスを転換し、生き残ることに成功した。

---

### まとめ
* **テクノロジーはイノベーションを「可能にするもの（enabler）」であり、それ自体が「推進力（driver）」ではない。**
* 企業は革新的なビジネスモデルを持ち、その実現のためにテクノロジーを効果的に活用する必要がある。
* ディスラプションの時代を生き抜くためには、市場の変化に素早く適応し、継続的に価値を提供するための**DevOps**のようなアプローチが不可欠となる。

## DevOps導入：大企業における変革の実態

---

### DevOps導入の最大の壁：既存文化の打破
* DevOpsの文化を真に受け入れるには、これまでの企業文化を**アンラーニング（学び直し）**する必要がある。
* 特に、スタートアップ企業と異なり、大企業にとっては長年培ってきた文化を変えることは非常に困難な課題となる。
* しかし、変化を受け入れなければ、市場のスピードについていくことはできない。

### 新しい働き方から生まれるメリット
DevOps文化が根付くと、以下のような変化が生まれる。

* **迅速なリカバリーとリスクの限定**:
    * 変更の**影響範囲（Blast Radius）**を限定することで、障害が発生してもシステム全体がダウンすることを防ぐ。
    * **「故障は必ず起こる」**という前提に立ち、いかに素早く復旧するか（平均復旧時間：**MTTR**）を重視する。これは、障害をゼロにすることを目指す従来のIT文化（平均故障間隔：MTTF）とは異なる考え方。
* **市場での直接テスト**:
    * 顧客の一部に対して新機能を見せて反応を測る**A/Bテスト**などを活用し、机上での分析だけでなく、市場で直接テストを行う。
* **柔軟なアプリケーション設計**:
    * **マイクロサービス**のような設計を採用することで、アプリケーション全体を停止させることなく、個別のコンポーネントを独立して変更・デプロイできる。
    * 例：Spotifyは、レコメンデーションエンジンを他のサービスに影響を与えることなく更新できる。

### 成功事例：DevOpsは「神話」ではない
* **2009年、Flickrの「1日10回以上のデプロイ」**という発表は、多くの技術者に衝撃を与えた。これは、大規模な変更ではなく、小さなコンポーネントを頻繁にデプロイする新しいアプローチだった。
* **2011年、Etsy**は1ヶ月に517回という驚異的なデプロイ数を達成し、この成功には**「信頼、透明性、コミュニケーション」**が不可欠であることを示した。
* 以前はスタートアップ企業の特権と考えられていたDevOpsは、**2016年**のDevOps Enterprise Summitで、**Ticketmaster、Nordstrom、Target**などの大手企業が成功事例を発表したことで、大企業にも適用可能であることが広く認識された。
    * **Target**: フルスタックデプロイにかかる時間が3ヶ月から数分に短縮。
    * **Ticketmaster**: 平均復旧時間が98%削減。

### DevOpsの本質：ツールではなく文化
* DevOpsの成功は、特定の魔法のようなツールを購入することで達成されるものではない。
* **デプロイのボトルネック**は、技術的な問題だけでなく、変更審査委員会のような**組織的なプロセス**にあることが多い。
* これらの障壁を打ち破り、迅速な変更を可能にするためには、チーム間の**信頼、透明性、コミュニケーション、協調性、規律**といった文化を根付かせることが不可欠である。
* **「DevOpsはツールではない。買うものではなく、なるものである。」**という言葉が、その本質を端的に表している。

## DevOpsの定義と本質

---

### DevOpsとは？
* **DevOps**は、**開発（Dev）**と**運用（Ops）**が協力してソフトウェア開発のライフサイクル全体に取り組む**プラクティス**です。
* 2009年にPatrick Debois氏によって提唱され、「アジャイル開発」の原則を運用チームに拡張した概念として誕生しました。
* **リーン**と**アジャイル**の原則に従い、ソフトウェアを迅速かつ継続的に提供することを目指します。

---

### DevOpsを構成する4つの要素
DevOpsは、以下の4つの要素が組み合わさって初めて実現します。

1.  **文化**:
    * 開発チームと運用チームが、**サイロ化**（部門間の分断）を解消し、**協力**する文化を築くことが不可欠です。
    * **オープンさ、信頼、透明性**といった価値観を重視します。
2.  **設計**:
    * 1つの大きなアプリケーション（モノリシック）ではなく、小さな独立したサービス（**マイクロサービス**）で構成されるような、新しいアプリケーション設計を採用します。
    * これにより、一部の変更がシステム全体に影響を与えることなく、頻繁なデプロイが可能になります。
3.  **自動化**:
    * マイクロサービスのような多数のコンポーネントを扱うには、手動でのデプロイは困難です。
    * ソフトウェアのデプロイを**自動化**することで、迅速かつ安定したアプリケーション提供を実現します。
4.  **プラットフォーム**:
    * サーバーの準備（プロビジョニング）などに何日も待つのではなく、アプリケーションを迅速にデプロイできる**動的でプログラム可能なプラットフォーム**が必要です。

---

### DevOpsではないもの
DevOpsの理解を深めるために、以下の誤解を避ける必要があります。

* **単なる「DevとOpsの協力」**: 単に同じ部屋で働くことではありません。協力には、文化的な変革が伴います。
* **「DevOpsチーム」**: DevOpsは特定のチームが担当するものではなく、組織全体が**「DevOpsになる」**ものです。アジャイルが「アジャイルチーム」を作るのではなく、会社全体がアジャイルになるのと同様です。
* **ツール**: DevOpsは特定のツールのことではありません。ツールはDevOps文化を**強化**しますが、文化そのものを**変える**ことはできません。
* **「運用の自動化」だけ**: 運用の自動化はDevOpsの一部分にすぎません。DevとOpsが協力し、全プロセスを改善することがDevOpsです。
* **万人向けの戦略**: 企業が提供するサービス（ソフトウェア製品、SaaS、サービスなど）によって最適なDevOpsの進め方は異なります。

DevOpsは、**「開発」と「運用」を一つのチーム、一つの目標、一つの評価基準で統合する**、組織全体の変革なのです。

## DevOpsの本質：アジリティを支える3つの柱

---

### アジリティ実現のための3つの柱
* **アジリティ（俊敏性）**とは、市場に最大速度で進出しつつ、最小限のリスクで賢い実験を繰り返し、顧客に提供する価値と品質を継続的に向上させる能力のことです。
* このアジリティを実現するために、DevOpsは以下の3つの柱によって支えられています。

1.  **DevOps**:
    * **文化的変革**：チーム間の共有された責任、透明性、迅速なフィードバックを重視する文化。
    * **自動化されたパイプライン**：開発からデプロイまでのプロセスを自動化。
    * **Infrastructure as Code (IaC)**：サーバーやネットワークなどのインフラをコードで管理。
    * **イミュータブルインフラストラクチャ**：一度構築したインフラは変更せず、問題が発生した場合は新しいものと交換する。
2.  **マイクロサービス**:
    * **疎結合**なアプリケーション設計：個々の機能（マイクロサービス）が独立しており、REST APIなどを通じて通信する。
    * **耐障害性**：各サービスが独立しているため、一部に障害が発生しても全体への影響が限定される。
3.  **コンテナ**:
    * **開発者中心の環境**：開発環境と本番環境の差異をなくし、移植性を確保。
    * **高速起動**：アプリケーションの起動が速い。
    * **使い捨て（Ephemeral）**：コンテナに問題が発生した場合、修正するのではなく、破棄して新しいものに置き換える。これにより、イミュータブルなインフラストラクチャを可能にする。

---

### アプリケーション開発の進化とDevOps
* DevOpsは、アプリケーション開発の進化の過程で生まれた概念です。
* **ウォーターフォール（Waterfall）**開発では、モノリシックなアプリケーションを物理サーバーにデプロイしていました。
* **アジャイル（Agile）**開発の普及により、サービス指向アーキテクチャ（SOA）と仮想マシン（VM）が使われるようになりました。
* そして、DevOpsの時代には、より小さく独立した**マイクロサービス**が**コンテナ**にデプロイされるようになりました。

---

### DevOpsの3つの次元：文化・方法・ツール
DevOpsは以下の3つの次元で構成されており、このバランスが成功の鍵となります。

1.  **文化 (Culture)**:
    * 最も重要であり、DevOps成功の最大の要因とされています。
    * 組織の価値観や行動様式そのものを変える、非常に困難な取り組みです。
    * **リーダーシップ層**が変革を推進し、**現場の従業員**がそれを受け入れて実践することで、初めて実現します。
2.  **方法 (Method)**:
    * 働き方、組織のあり方、評価方法などを変える具体的なアプローチです。
    * **考え方を変える**: ソーシャルコーディングや共有を推進する。
    * **働き方を変える**: 小さなバッチでの作業や、テスト駆動・振る舞い駆動開発を導入する。
    * **組織のあり方を変える**: 組織構成が成果物の設計に直接影響することを理解し、適切な組織構造を構築する。
    * **評価方法を変える**: 「何を測定するか」が行動を決定するため、正しい行動を促す評価システムを導入する。
3.  **ツール (Tools)**:
    * パイプライン自動化、コンテナ管理、インフラ管理などに使われる具体的な技術やソフトウェアです。
    * ツールの導入だけではDevOpsは実現しません。ツールは、変革された文化と方法を**サポート**するためのものです。

### まとめ
* DevOpsの本質は、単なるツールの導入ではなく、**アジリティ**という目標に向けた**文化、方法、ツール**の3次元にわたる包括的な変革にあります。
* 特に、企業の文化を変革することがDevOpsを成功させるための最も重要な要素です。

## DevOps導入の背景：ウォーターフォール開発と開発・運用間の課題

この講義では、DevOpsがなぜ生まれたのか、その背景にある伝統的な**ウォーターフォール開発モデル**と、**開発チームと運用チームの関係性**について解説しています。

### ウォーターフォール開発モデルの問題点

ウォーターフォール開発モデルは、土木建築プロジェクトのように、要件定義から設計、開発、テスト、デプロイメントまでを順番に進める段階的な開発手法です。各フェーズは前のフェーズが完了しないと開始できず、一度進むと前のフェーズに戻ることが非常に困難であるため、「ウォーターフォール（滝）」と名付けられました。

このモデルには、以下のような重大な問題がありました。

* **変更への対応が困難**: 各フェーズには厳格な完了条件があり、一度完了したフェーズに戻って要件や設計を変更することは非常にコストがかかり、困難でした。
* **手戻りのコストが高い**: 設計上の問題やバグがテストフェーズなど後の段階で発見された場合、開発フェーズや設計フェーズまで遡って修正する必要があり、修正コストが莫大になりました。
* **最終段階まで動作が確認できない**: 統合やテストがプロジェクトの終盤にまとめて行われるため、コードが実際に機能するかどうか、各モジュールが連携して動作するかどうかが最終段階までわかりませんでした。これにより、プロジェクトの失敗リスクが高まりました。
* **長期のリードタイム**: 各フェーズが独立しており、前のフェーズの完了を待つため、開発からリリースまでに非常に長い時間がかかりました。

### 開発チームと運用チームの関係性

ウォーターフォールモデルでは、開発チームと運用チームは互いに独立した**サイロ（孤立した組織）**として機能していました。

* **コミュニケーションの不足**: 開発チームはコードを完成させた後、運用チームに引き継ぎますが、その過程で十分な情報共有が行われませんでした。
* **責任範囲の分断**: 開発チームはコードを書くことに集中し、運用チームは完成したコードを本番環境で実行・管理することに集中していました。
* **相互理解の欠如**: 開発チームは運用チームが直面する問題（デプロイの複雑さ、本番環境での動作）を理解せず、運用チームは開発されたコードの詳細をほとんど知りませんでした。
* **運用チームへの負担**: 運用チームは、自身が関与しなかった、そしてほとんど知らないコードのデプロイと実行、そしてその後の管理を任されていました。これにより、運用の作業が遅延し、大きな負担となっていました。

これらの問題が、より迅速で柔軟な開発と運用を目指す**DevOps**という考え方へと繋がっていきます。

## DevOpsの誕生：XPとAgileの歩み

### 1. **エクストリームプログラミング（XP）とフィードバックループ**

**エクストリームプログラミング（XP）**は、**アジャイル開発**のルーツの一つであり、ソフトウェアの品質向上と顧客の要求の変化への迅速な対応を目指す手法です。この開発モデルは、短い周期の**フィードバックループ**を特徴としています。

- **フィードバックループの例**:
  - リリース計画：数ヶ月単位
  - イテレーション計画：数週間単位
  - 日次ミーティング：毎日
  - ペアプログラミング：数時間単位
  - 単体テスト：数分単位

**ペアプログラミング**は、2人1組で開発を行う手法で、コードレビューや知識共有を常時行うことで、品質向上とチーム全体のスキルアップに貢献します。

### 2. **アジャイルマニフェストの誕生と価値観**

2001年、ソフトウェア開発者たちが集まり、**アジャイルマニフェスト**を発表しました。これは、エクストリームプログラミングなどの軽量な開発手法の共通の価値観を明文化したものです。

- **アジャイルの4つの価値観**:
  1. **個人と対話**を、プロセスやツールよりも重視する。
  2. **動くソフトウェア**を、包括的なドキュメントよりも重視する。
  3. **顧客との協調**を、契約交渉よりも重視する。
  4. **変化への対応**を、計画に従うことよりも重視する。

アジャイル開発では、要求と解決策が**自己組織化されたクロスファンクショナルチーム**と顧客の協働を通じて進化します。計画は**スプリント**と呼ばれる短期間の反復単位で適応的に行われ、継続的な改善が奨励されます。

### 3. **アジャイルだけでは不十分だった理由**

アジャイル開発は開発チーム内での問題を解決しましたが、**運用（Ops）チーム**との連携という新たな課題を生みました。

- **二層IT（Two-Speed IT）問題**:
  - 開発チームは**アジャイル**で迅速に開発を進める。
  - 運用チームは従来のプロセス（例：チケットシステム）に従い、リソース提供などに時間がかかる。
- **シャドーIT（Shadow IT）の発生**:
  - 開発チームが、社内の遅いプロセスを避け、IT部門に無断でクラウドサービスなどを利用してリソースを調達するようになる。

この開発チームと運用チーム間の分断が、アジャイルのスピードを阻害し、新たな問題を引き起こしました。この問題を解決するために、**開発（Dev）**と**運用（Ops）**を統合する**DevOps**という考え方が生まれたのです。

## DevOpsの簡潔な歴史

この講義では、2007年から2019年にかけてのDevOpsの成長における主要な出来事と、その発展に貢献した重要人物について解説しています。DevOpsは、特定の企業や製品によって始まったのではなく、現場の技術者たちによる草の根運動として生まれました。

---

### DevOpsの年表（2007-2019）と主要人物の貢献

| 年 | 主要な出来事 | 主な貢献者 |
| :--- | :--- | :--- |
| **2007年** | Patrick Deboisが、開発チームと運用チームの間の課題を認識。DevOpsの概念が芽生える。 | **Patrick Debois** |
| **2008年** | Agile ConferenceでAndrew Clay Shaferが「アジャイルインフラストラクチャ」のセッションを企画。Deboisが参加し、DevとOpsの連携について議論。 | **Andrew Clay Shafer** |
| **2009年** | Velocity ConferenceでJohn Allspawが「1日10回以上のデプロイ」という講演を行い、DevとOpsの協業の可能性を示す。 | **John Allspaw** |
| **2009年** | ベルギーで最初の「DevOpsDays」カンファレンスが開催され、「DevOps」という言葉が初めて使われる。 | **Patrick Debois** |
| **2010年** | **『Continuous Delivery』**を出版。ビルド、デプロイ、テストの自動化と、チーム間のコラボレーションの重要性を提唱し、ソフトウェアの継続的なデリバリーを可能にする原則と手法を確立。 | **Jez Humble, David Farley** |
| **2013年** | **『The Phoenix Project』**を出版。製造業のリーン生産方式の原則をITとソフトウェアデリバリーに適用する物語を通して、DevOpsの概念を広く普及させる。 | **Gene Kim, Kevin Behr, George Spafford** |
| **2015年** | DORA (DevOps Research and Assessment)社が設立され、**「State of DevOps Report」**が開始される。データに基づき、DevOpsの実践が組織のパフォーマンスを向上させることを証明。 | **Nicole Forsgren, Gene Kim, Jez Humble** |
| **2016年** | **『The DevOps Handbook』**を出版。『The Phoenix Project』で提示された概念を、具体的な実践方法として解説。DevOps導入のための実践的なガイドとなる。 | **Gene Kim, Jez Humble, Patrick Debois, John Willis** |

---

### 主要人物の貢献のまとめ

- **Patrick Debois**: DevOpsの父。DevとOps間の課題を最初に認識し、最初のDevOpsDaysを開催して「DevOps」という言葉を生み出した。
- **Andrew Clay Shafer**: アジャイルとインフラストラクチャを結びつけるアイデアを提唱し、DevOps運動の議論のきっかけを作った。
- **John Allspaw**: Flickrでの成功事例を共有し、DevとOpsの協業によって「1日10回以上のデプロイ」が可能であることを示した。
- **Jez Humble & David Farley**: **『Continuous Delivery』**の著者。継続的なデリバリーという技術的実践の基盤を築いた。
- **Gene Kim**: **『The Phoenix Project』**と**『The DevOps Handbook』**の著者。リーン生産方式の原則をITに適用し、DevOpsの概念を物語形式と実践ガイドの両方で広めた。
- **Nicole Forsgren**: DORAの創設者の一人。データに基づいた調査を行い、DevOpsが組織のパフォーマンスとコスト削減に貢献することを実証した。

---

DevOpsは、これらのパイオニアたちが中心となり、文化の変化、ツールの活用、プロセスの改善を通じて、ソフトウェアデリバリーにおける長年の課題を解決しようとした草の根運動です。それは単なる製品や役職名ではなく、「実践者による、実践者のための運動」として、現在も進化し続けています。